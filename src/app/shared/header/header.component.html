<section>
  <div class="header-container">
    <!-- Navigation Bar & Settings -->
    <div class="navigation-container shadow">
      <div class="navigation-bar">
        <div class="search-bar-container">
          <input class="search-bar std-font lg-font-size" [(ngModel)]="searchState.searchTerm" (keyup.enter)="search()" type="text" placeholder="Search"/>
        </div>
        <img class="magnifying-glass std-transition" (click)="search()" src="./assets/img/search.png" alt="search"/>
        <img class="menu std-transition" (click)="updateSearch(!isSearchExpanded)" src="./assets/img/menu.png" alt="menu"/>
      </div>
      <!-- Search Settings Container -->
      <div class="search-settings-container std-transition" [ngStyle]="{'height': isSearchExpanded ? '350px' : '0' }">
        <div class="read-view-settings">
          <!-- Dark Mode Toggle -->
          <div class="setting-container">
            <label class="toggle-switch">
              <input [(ngModel)]="isDarkMode" type="checkbox" (change)="updateDarkMode()">
              <span class="slider round"></span>
            </label>
            <span class="std-font md-font-size">Dark Mode</span>
          </div>
          <!-- Cookies Toggle -->
          <div class="setting-container">
            <div class="range-slider">
              <input [(ngModel)]="colorRange" (input)="updateAccent()" type="range" min="0" max="359" value="0" class="slider">
            </div>
            <span class="std-font md-font-size">Accent</span>
          </div>
          <!-- Read View Selection -->
          <div class="read-view-selection-container">
            <div class="read-view-selection std-font std-transition">
              <img [src]="modeSettings.modes[modeSettings.current].icon"/>
              <span class="md-font-size">{{modeSettings.modes[modeSettings.current].display}}</span>
              <img class="down-arrow std-transition" src="./assets/img/caret.png"/>
            </div>
            <div class="read-view-selection-list md-font-size shadow std-transition">
              <ng-container *ngFor="let mode of this.modeSettings.modes | keyvalue : originalOrder">
                <div class="read-view-selection std-font" (click)="setMode(mode.value.id)">
                  <img [src]="mode.value.icon"/>
                  <span class="md-font-size">{{mode.value.display}}</span>
                </div>
              </ng-container>
            </div>
          </div>
        </div>
        <!-- Version Search Input -->
        <div class="version-search-container">
          <input class="version-search std-font md-font-size" type="text" [(ngModel)]="searchState.versionSearchTerm" (ngModelChange)="searchState.filterVersions()" placeholder="Search Versions"/>
        </div>
        <!-- Version List -->
        <div class="versions-container">
          <!-- Selected Versions Row -->
          <div class="miniview std-font" *ngIf="searchState.selectedVersions && searchState.selectedVersions.size > 0">
            <div class="mini-selected sm-font-size std-transition" *ngFor="let version of searchState.selectedVersions" (click)="searchState.toggleVersion(version)">
              <span *ngIf="searchState.selectedVersions.size > 1" class="close">Ã—</span><span>{{version.name}}</span>&nbsp;<span *ngIf="version.description">[{{version.description}}]</span>
            </div>
          </div>
          <!-- Available Version Row -->
          <table class="versions std-font">
            <tr class="std-transition sm-font-size" *ngFor="let version of searchState.filteredVersions" (click)="searchState.toggleVersion(version)" [ngClass]="{'selected': version.selected}">
              <td><span>{{version.name}}</span></td>
              <td><span>{{version.description || 'Not Provided'}}</span></td>
              <td><span>{{version.language.name}} <sup>[{{version.language.script}}]</sup></span></td>
            </tr>
          </table>
        </div>
      </div>
    </div>
  </div>
</section>
